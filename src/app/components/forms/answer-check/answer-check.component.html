<h2 mat-dialog-title>Proposer une réponse</h2>

<div mat-dialog-content>
  <h3><strong>{{ data.question }}</strong></h3>

  <form [formGroup]="answerForm" (ngSubmit)="checkAnswer()">
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Réponse</mat-label>
      <textarea matInput formControlName="proposedAnswer" placeholder="Entrez votre réponse"></textarea>
    </mat-form-field>
    <button mat-raised-button color="warn" type="submit" class="full-width">Comparer</button>
  </form>

  <div *ngIf="showComparison" class="comparison-section">
    <mat-divider></mat-divider>
    <p><strong>Bonne réponse :</strong></p>
    <div class="answer-display">
      <span *ngFor="let char of answerComparison"
            [ngStyle]="{'background-color': char.correct ? 'lightgreen' : 'red'}">
        {{ char.correct ? char.char : data.correctAnswer[answerComparison.indexOf(char)] }}
      </span>
    </div>

    <p><strong>Votre réponse :</strong></p>
    <div class="answer-display">
      <span *ngFor="let char of answerComparison"
            [ngStyle]="{'background-color': char.correct ? 'lightgreen' : 'red'}">
        {{ char.char }}
      </span>
    </div>

    <p><strong>Explication :</strong></p>
    <p>{{ data.description }}</p>
  </div>
</div>

<div mat-dialog-actions align="end">
  <button mat-raised-button color="primary" (click)="closeDialog()">Fermer</button>
</div>
